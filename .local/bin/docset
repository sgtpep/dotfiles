#!/bin/bash
set -eu
path=~/.local/share/docsets
if [[ ! -d $path/$1.docset ]]; then
  mkdir -p "$path"
  wget -O - https://frankfurt.kapeli.com/feeds/"$1".tgz | tar -xz -C "$path" || rm -fr "$path"/"$1".docset
fi
exec x-www-browser "$path"/Contents/Resources/Documents/"$(grep -Po '(?<=<key>dashIndexFilePath</key><string>)[^<]*' "$path"/Contents/Info.plist)"
