#!/bin/bash
set -eu
while :; do
  script=${2-$(rlwrap -o -C "${0##*/}" -P '' -S "${1##*/}> " -b '' -g '^ ' -q '([' -s 10000 -w 0 cat)}
  if [[ $script ]]; then
    node -e "
$(< "$1")
console.log($script);
" |& less
    [[ ! ${2-} ]] || break
  else
    echo
    break
  fi
done
