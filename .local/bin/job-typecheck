#!/bin/bash
set -eu
path=.tsconfig.json
job-list "$@" | grep '\.\(jsx\?\|tsx\?\)$' | exec xargs -r -d '\n' node -e 'fs.writeFileSync(process.argv[1], JSON.stringify({...require(`./${process.argv[1].slice(1)}`), include: ["src/react-app-env.d.ts", ...process.argv.slice(2)]}))' -- "$path"
npx tsc -p "$path" || status=$?
rm "$path"
exit "${status-0}"
